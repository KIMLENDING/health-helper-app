## 📦 MongoDB 스키마 개요

이 프로젝트는 Mongoose를 사용하여 피트니스 관련 핵심 데이터를 스키마 형태로 정의합니다.

---

### 🧑‍💼 User

앱 사용자에 대한 정보를 저장하는 스키마입니다.

| 필드       | 타입   | 필수 여부 | 설명                                            |
| ---------- | ------ | --------- | ----------------------------------------------- |
| `email`    | String | ✅        | 이메일 주소                                     |
| `password` | String | ❌        | 비밀번호 (소셜 로그인 사용 시 비어있을 수 있음) |
| `name`     | String | ✅        | 사용자 이름                                     |
| `image`    | String | ❌        | 프로필 이미지 URL                               |
| `role`     | String | ✅        | 사용자 권한 (기본값: `"user"`)                  |
| `provider` | String | ✅        | 로그인 제공자 (`google`, `github` 등)           |

> 🔐 `email + provider` 조합으로 고유한 사용자 식별을 보장하기 위해 복합 인덱스가 설정되어 있습니다.

---

### 🏋️ Exercise

운동 항목을 정의하는 스키마입니다.

| 필드          | 타입     | 필수 여부 | 설명                                  |
| ------------- | -------- | --------- | ------------------------------------- |
| `title`       | String   | ✅        | 운동 이름 (고유)                      |
| `description` | String   | ✅        | 운동 설명                             |
| `url`         | String   | ✅        | 참고 영상 또는 설명 링크              |
| `tags`        | [String] | ✅        | 태그 목록 (예: 상체, 하체, 유산소 등) |

---

### 📋 ExercisePlan

사용자가 미리 설정한 운동 계획(루틴)을 저장하는 스키마입니다.

| 필드        | 타입     | 필수 여부 | 설명                    |
| ----------- | -------- | --------- | ----------------------- |
| `userId`    | ObjectId | ✅        | 계획을 생성한 사용자 ID |
| `title`     | String   | ✅        | 계획 제목               |
| `exercises` | [객체]   | ✅        | 포함된 운동 목록        |

**exercises 배열의 내부 구조:**

| 필드            | 타입     | 필수 여부 | 설명              |
| --------------- | -------- | --------- | ----------------- | --------- | ------------------------------------------------------------------ |
| `exerciseId`    | ObjectId | ✅        | 참조: `Exercise`  |
| `sets`          | Number   | ✅        | 세트 수           |
| `reps`          | Number   | ✅        | 반복 횟수         |
| `weight`        | Number   | ✅        | 목표 중량 (kg 등) |
| > **(제거됨)**: | `title`  | String    | ✅                | 운동 이름 | `title` 필드는 `exerciseId`로 populate하면 되기 때문에 제거 하였음 |

---

### 🧪 ExerciseSession

실제 수행된 운동 세션을 기록하는 스키마입니다.

| 필드             | 타입     | 필수 여부 | 설명                                 |
| ---------------- | -------- | --------- | ------------------------------------ |
| `userId`         | ObjectId | ✅        | 세션 수행자 ID                       |
| `exercisePlanId` | ObjectId | ✅        | 기반이 된 운동 계획                  |
| `exercises`      | [객체]   | ✅        | 세션 동안 수행된 운동들              |
| `state`          | String   | ✅        | 세션 상태 (`"inProgress"`, `"done"`) |

**exercises 배열의 내부 구조:**

| 필드            | 타입     | 필수 여부 | 설명                                  |
| --------------- | -------- | --------- | ------------------------------------- | --------- | ------------------------------------------------------------------ |
| `exerciseId`    | ObjectId | ✅        | 참조: `Exercise`                      |
| `repTime`       | Number   | ❌        | 전체 세트 수행 시간 (초 단위 등)      |
| `sets`          | Number   | ✅        | 세트 수                               |
| `state`         | String   | ✅        | `"pending"`, `"inProgress"`, `"done"` |
| `session`       | [객체]   | ✅        | 실제 수행한 각 세트 정보              |
| > **(제거됨)**: | `title`  | String    | ✅                                    | 운동 이름 | `title` 필드는 `exerciseId`로 populate하면 되기 때문에 제거 하였음 |

**session 배열의 내부 구조 (개별 세트):**

| 필드      | 타입   | 필수 여부 | 설명           |
| --------- | ------ | --------- | -------------- |
| `set`     | Number | ✅        | 세트 번호      |
| `reps`    | Number | ✅        | 실제 반복 횟수 |
| `weight`  | Number | ✅        | 사용 중량      |
| `endTime` | Date   | ❌        | 세트 종료 시각 |

---

### ✅ 설계 의도

- 미리 정의된 운동 계획과 실제 수행 데이터를 분리하여 유연한 기록 구조 제공
- 세트 단위의 정밀 기록을 통해 운동 통계 및 분석 가능
- 사용자 경험에 최적화된 백엔드 모델 구성으로 다양한 클라이언트 연동 가능 (Next.js, React Native 등)
